send:
  name: Send Message
  description: Send an SMS message to a contact.
  fields:
    contact_id:
      name: Contact
      description: Select a contact to send message to.
      required: true
      example: "contact_1"
      selector:
        entity:
          domain: sensor
          device_class: ""
          filter:
            - domain: sensor
              integration: textnow
    message:
      name: Message
      description: Message text to send.
      required: true
      example: "Hello, this is a test message"
      selector:
        text:

prompt:
  name: Prompt
  description: Send a prompt message with choices and wait for a reply. The reply will be parsed and a textnow_reply_parsed event will be fired.
  fields:
    contact_id:
      name: Contact
      description: Select a contact to send prompt to.
      required: true
      example: "contact_1"
      selector:
        entity:
          domain: sensor
          device_class: ""
          filter:
            - domain: sensor
              integration: textnow
    key:
      name: Key
      description: Unique key to identify this prompt. Used in reply_parsed event.
      required: true
      example: "user_choice"
      selector:
        text:
    prompt:
      name: Prompt Text
      description: The prompt message to send (options will be numbered automatically).
      required: true
      example: "Please choose an option"
      selector:
        text:
    ttl_seconds:
      name: TTL Seconds
      description: Time to live for pending expectation in seconds.
      default: 300
      example: 300
      selector:
        number:
          min: 1
          max: 86400
          step: 1
          unit_of_measurement: seconds
    options:
      name: Options
      description: List of options for the user to choose from (as list or newline-separated string). Required.
      required: true
      example: "Option 1\nOption 2\nOption 3"
      selector:
        text:
    response_variable:
      name: Response Variable
      description: Variable name to store the response (e.g., "user_choice"). After waiting for the textnow_reply_parsed event, use the "variables" action to set this variable from trigger.event.data.response_number (1, 2, 3, etc.).
      required: false
      example: "user_choice"
      selector:
        text:
    keep_pending:
      name: Keep Pending
      description: If true, don't clear pending expectation after first match.
      default: false
      selector:
        boolean:

clear_pending:
  name: Clear Pending
  description: Clear pending expectations for a contact.
  fields:
    contact_id:
      name: Contact
      description: Select a contact to clear pending for.
      required: true
      example: "contact_1"
      selector:
        entity:
          domain: sensor
          device_class: ""
          filter:
            - domain: sensor
              integration: textnow
    key:
      name: Key
      description: Optional specific key to clear. If not provided, clears all pending for the phone.
      example: "user_choice"
      selector:
        text:

set_context:
  name: Set Context
  description: Set or merge context data for a contact.
  fields:
    contact_id:
      name: Contact
      description: Select a contact to set context for.
      required: true
      example: "contact_1"
      selector:
        entity:
          domain: sensor
          device_class: ""
          filter:
            - domain: sensor
              integration: textnow
    data:
      name: Data
      description: Dictionary of context data to merge.
      required: true
      example: '{"step": 1, "user_name": "John"}'
      selector:
        object:

